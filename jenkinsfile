pipeline {
    agent any 
    stages {
        stage('Compile') {
            steps {
                echo 'Compile the source code'
                dir('.'){
                bat 'docker-compose up -d --build'
                echo 'Compile success'
                }
            }
        }
        stage('test'){
            steps{
                echo 'test with pytest'
                dir('.'){
                    bat 'node testapp.js'
                }
            }
        }
        
    }
}